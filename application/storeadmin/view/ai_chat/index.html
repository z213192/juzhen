<style type="text/css"> 
    .content-all{border: 1px solid #545454;display: flex;clear: both;border-radius: 5px;}
    .content-left{width: 450px;background: #2b2b2e;height: 730px;overflow-y: scroll;float: left;}
    .content-right{width: 70%;background: #2b2b2e;height: 730px;float: left;}
    .message_user{height: 80px;border-top: 1px solid #545454;border-bottom: 1px solid #545454;cursor: pointer;}
    .message_user_list .active{background: #424244;}
    .content-left h2,.content-right-title{font-size: 16px;text-align: center;line-height: 50px;margin: 0px;display: block;}
    .content-right-content{height: 620px;overflow-y: scroll;padding: 20px;}
    .content-right-send{border: 1px solid #999;height: 40px;width: 80%;background: #2b2b2e;padding-left: 10px;margin-left: 3%;line-height: 40px;border-radius: 5px;color: #fff;}
    .content-send-btn{width: 10%;margin-left: 1%;border-radius: 5px;height: 40px;line-height: 40px;margin-top: 5px;vertical-align: bottom;background: #2b2b2e;color: #fff;border: 0px;border: 1px solid #999;}
    .message_user_img{float: left;width: 80px;}
    .message_user_img img{width: 50px;height: 50px;border-radius: 50%;display: inline-block;margin-top: 15px;margin-left: 10px;}
    .message_user_list{margin-top: 10px;}
    .message_user_content{float: left;width: 200px;border: 1px solid #eee;text-align: center;margin-left: 13px;border-radius: 10px;margin-bottom: 30px;height: 100px;padding-top: 10px;cursor: pointer;}
    .message_user_content h3{font-size: 18px;overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;width: 200px;}
    .message_user_content p{color: #999;    overflow: hidden;white-space: nowrap;text-overflow: ellipsis;}

    .message{position:relative;display:;color:#fff;width:100%;margin:5px 0}
    .message p{position:relative;right:0;text-align:right;max-width:95%;padding:12px;background:#484848;border-radius:10px;font-size:.9em}
    .my_message img{margin-left:20px;width:50px;height:50px}
    .message p span{display:block;margin-top:5px;font-size:.85em;opacity:.5}
    .my_message{justify-content:flex-end}
    .frnd_message{justify-content:flex-start;margin-top: 40px;margin-left: 1.5%;}
    .frnd_message p{background:#484848;text-align:left;font-size: 14px;line-height: 24px;}
    .content-right-title a{cursor: pointer;}
</style>
<div class="panel panel-default panel-intro">
    {:build_heading()}

    <div class="panel-body">
        <div class="content-all">
            <div  class="content-left">
                <h2>创作场景</h2>
                <div class="message_user_list">
                    <div class="message_user_content" data-title="短视频脚本">
                        <h3>短视频脚本</h3>
                        <p>一键生成短视频脚本</p>
                    </div>
                    <div class="message_user_content" data-title="小红书标题">
                        <h3>小红书标题</h3>
                        <p>生成小红书风格的标题</p>
                    </div>
                    <div class="message_user_content" data-title="小红书内容">
                        <h3>小红书内容</h3>
                        <p>生成小红书风格文案</p>
                    </div>
                    <div class="message_user_content" data-title="知乎创作">
                        <h3>知乎创作</h3>
                        <p>生成知乎风格文案</p>
                    </div>
                    <div class="message_user_content" data-title="直播话术">
                        <h3>直播话术</h3>
                        <p>输入要求生成直播话术</p>
                    </div>
                    <div class="message_user_content" data-title="火爆文案">
                        <h3>火爆文案</h3>
                        <p>生成短视频文案跟标题</p>
                    </div>
                    <div class="message_user_content" data-title="SEO伪原创改写">
                        <h3>SEO伪原创改写</h3>
                        <p>一键改写文章内容</p>
                    </div>
                    <div class="message_user_content" data-title="朋友圈文案">
                        <h3>朋友圈文案</h3>
                        <p>一键生成朋友圈文案</p>
                    </div>
                    <div class="message_user_content" data-title="公众号创作">
                        <h3>公众号创作</h3>
                        <p>生成公众号风格文案</p>
                    </div>
                    <div class="message_user_content" data-title="作文创作">
                        <h3>作文创作</h3>
                        <p>输入标题生成模板作文</p>
                    </div>
                    
                    <div class="message_user_content" data-title="诗词创作">
                        <h3>诗词创作</h3>
                        <p>按要求写诗</p>
                    </div>
                    <div class="message_user_content" data-title="高情商回复">
                        <h3>高情商回复</h3>
                        <p>帮你生成回答不了的问题</p>
                    </div>
                    
                    
                </div>
            </div>
            <div  class="content-right">
                <h2 class="content-right-title">AI创作记录</h2>
                <div  class="content-right-content" id="content-right-content">
                    {foreach $chats as $k=>$v}
                        <div class="message frnd_message">
                            <h3>{$v.title}</h3>
                            <p>{$v.result}<br><span>{$v['addtime']} （总字数：{$v['total_tokens']}字）</span></p>
                        </div>
                    {/foreach}
                </div>
                <div>
                     <input type="text" class="content-right-send" name="" placeholder="说点什么创作要求吧。。。">
                     <button class="content-send-btn chuangzuo_btn">开始创作</button>
                </div>
               
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src='/storeadmin2/libs/jquery/dist/jquery.min.js?v=162913148'></script>

<script type="text/javascript">
    function onGetMessage()//在有新消息发送完的地方调用一下这个方法就可以了
    {
        var divscll = document.getElementById('content-right-content');//装消息的div
        divscll.scrollTop = divscll.scrollHeight;
    }
    onGetMessage();
    $('.message_user_content').click(function(){
        title = $(this).attr('data-title');
        $('.message_user_content').css('background','unset');
        $(this).css('background','#565555');
        $('.content-right-send').val(title+'：');
    });

    $('.chuangzuo_btn').click(function(){
        content = $('.content-right-send').val();
        if(content == ''){
            layer.msg('请输入话术要求');
            return;
        }
        load = layer.load();
        $('.content-send-btn').removeClass('chuangzuo_btn');
        $('.content-send-btn').html('创作中...');
        
        $.post('ai_chat/ai_chat',{content:content},function(data){
            layer.close(load);
            $('.content-send-btn').addClass('chuangzuo_btn');
            $('.content-send-btn').html('开始创作');
            layer.msg(data.msg);
            if(data.code==1){
                window.location.reload();
            }
        },'json');
    });
</script>

